<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="//cdn.bootcss.com/underscore.js/1.8.3/underscore-min.js"></script>
</head>
<body>
<script>
    //元素位置操作
    //_.first(array, [n])返回array（数组）的第一个元素 +_.last(array, [n])
    //_.initial(array, [n])返回数组中除了最后一个元素外的其他全部元素。传递 n参数将返回数组中从最后一个元素开始的n个元素
    //_.rest(array, [index])返回数组中除了第一个元素外的其他全部元素。传递 index 参数将返回从index开始的剩余所有元素 。

    var arr = [1, 2, 3, 4, 5, 6, 3];
    console.log(_.first(arr));
    console.log(_.last(arr));
    console.log(_.initial(arr, 2));//[1, 2, 3, 4]
    console.log(_.rest(arr, 2));//[3, 4, 5, 6]
    console.log("_____________");

    //_.sortedIndex(list, value, [iteratee], [context]) 使用二分查找确定value在list中的位置序号，value按此序号插入能保持list原有的排序。
    console.log(_.indexOf(arr, 3));//1
    console.log(_.lastIndexOf(arr, 3));//6
    _.sortedIndex([10, 20, 30, 40, 50], 35);//3
    var stooges = [{name: 'moe', age: 40}, {name: 'curly', age: 60}];
    _.sortedIndex(stooges, {name: 'larry', age: 50}, 'age');//1

    //_.compact(array)返回一个除去所有false值的 array副本。 在javascript中, false, null, 0, "", undefined 和 NaN 都是false值.
    //_.flatten(array, [shallow])将一个嵌套多层的数组 array（数组） (嵌套可以是任何层数)转换为只有一层的数组。 如果你传递 shallow参数，数组将只减少一维的嵌套。
    var arrFlag = [1, 0, 6, false, null];
    console.log(_.compact(arrFlag))
    _.flatten([1, [2], [3, [[4]]]]);//[1, 2, 3, 4];
    _.flatten([1, [2], [3, [[4]]]], true);//[1, 2, 3, [[4]]];
    _.zip(['one','two','three'],[1,2,3]);

    _.object(['moe', 'larry', 'curly'], [30, 40, 50]);//{moe: 30, larry: 40, curly: 50}

    _.object([['moe', 30], ['larry', 40], ['curly', 50]]);//{moe: 30, larry: 40, curly: 50}


    var fun=function(gree){
        return gree+","+this.name
    }
    funWork=_.bind(fun,{name:"rui"},'HI');
    funWork();


    var buttonView = {
        label   : 'underscore',
        onClick : function(){ console.log('clicked: ' + this.label); },
        onHover : function(){ console.log('hovering: ' + this.label); }
    };

    var func2=_.bindAll(buttonView,"onClick","onHover");
    func2.onClick();


    var number=function(a,b){
        console.log(a)
        console.log(b)
    }
    var test=_.partial(number,5);
    test();
    test(7);

    var fibonacci=_.memoize(function(n){
        return n<2?fibonacci(n-1):fibonacci(n-2);
    })

    var result=_.delay(function(){console.log("late")},2000);

    //_.after(count, function) _.before(count, function)

    var num=[11,22,33];
    var renderNum=_.after(num.length,function () {

        console.log("end");
    })
    _.each(num,function(n){
        console.log(n);
        renderNum();
    })


    var hello = function(name) { return "hello: " + name; };
    hello = _.wrap(hello, function(func) {
        return "before, " + func("moe") + ", after";
    });
    hello();
</script>
</body>
</html>